(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(12),o=a.n(i),c=(a(24),a(8)),s=a(7),l=a(11);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=Object(c.c)({action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTED_FOR_GEOLOCATION":case"REQUESTED_WEATHER":return p({},e,Object(l.a)({},t.requestCreator,{}));case"REQUESTED_WEATHER_SUCCEEDED":return p({},e,Object(l.a)({},t.requestCreator,t.payload));case"REQUESTED_WEATHER_FAILED":return p({},e,Object(l.a)({},t.requestCreator,{cod:-1}));case"DELETE_FAVOUR":var a={};for(var r in e)r!==t.key&&(a[r]=e[r]);return a;default:return e}}}),h=a(18),m=a(1),f=a(2),v=a(4),b=a(3),E=a(5),O=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"nav_refresh_geolocation"},n.a.createElement("div",{className:"text"},"Weather here"),n.a.createElement("button",{className:"button",id:"refresh_geolocation",onClick:function(){return e.props.geoRefreshFunc()}},"Refresh Geolocation"))}}]),t}(n.a.Component),y=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("input",{className:"img_button",type:"image",name:"submit",alt:"delete",onClick:function(){return e.props.deleteFavour(e.props.id)},src:"img/del.png"})}}]),t}(n.a.Component),g=function(e){localStorage.removeItem(e);var t=JSON.parse(localStorage.getItem("cities"));return t.splice(t.indexOf(e),1),localStorage.setItem("cities",JSON.stringify(t)),function(t){t(function(e){return{type:"DELETE_FAVOUR",key:e}}(e))}},j=Object(s.b)(null,(function(e){return{deleteFavour:function(t){e(g(t))}}}))(y),S=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e="Favour"===this.props.displayStyle?"main_favour_weather_info":"Geo"===this.props.displayStyle?"main_geo_weather_info":"";return n.a.createElement("div",{className:e},n.a.createElement("div",{className:"city"},this.props.data.city),n.a.createElement("div",{className:"img"},n.a.createElement("img",{className:"weather_icon",alt:"weather",src:"http://openweathermap.org/img/wn/".concat(this.props.data.icon,"@2x.png")})),n.a.createElement("div",{className:"temp"},this.props.data.temp,"\xb0C"),"Favour"===this.props.displayStyle&&n.a.createElement(j,{id:this.props.id}))}}]),t}(n.a.Component),w=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"line"},n.a.createElement("div",{className:"param"},this.props.param),n.a.createElement("div",{className:"value"},this.props.value))}}]),t}(n.a.Component),_=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{id:"advanced_weather_info",className:"list"},n.a.createElement(w,{param:"Weather",value:this.props.data.weather}),n.a.createElement(w,{param:"Pressure",value:this.props.data.pressure+" mmHg"}),n.a.createElement(w,{param:"Humidity",value:this.props.data.humidity+" %"}),n.a.createElement(w,{param:"Wind",value:this.props.data.wind}),n.a.createElement(w,{param:"Coordinates",value:"["+this.props.data.coords[0]+", "+this.props.data.coords[1]+"]"}))}}]),t}(n.a.Component),C=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"placeholder"},n.a.createElement("div",{className:"text"},"Wait, weather loading is in progress.."),n.a.createElement("img",{className:"placeholder_img",alt:"loading",src:"img/loading.gif"}))}}]),t}(n.a.Component),k=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"placeholder"},n.a.createElement("div",{className:"text"},"Error, try again later.."),n.a.createElement("img",{className:"placeholder_img",alt:"loading",src:"img/error.gif"}),this.props.removable&&n.a.createElement(j,{id:this.props.id}))}}]),t}(n.a.Component),N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(v.a)(this,Object(b.a)(t).call(this,e))).state={loading:!0,error:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e="Favour"===this.props.displayStyle?"favour_block":"Geo"===this.props.displayStyle?"geolocation_weather":"";return n.a.createElement("div",{className:e},this.state.loading?n.a.createElement(C,null):this.state.error?n.a.createElement(k,{removable:this.props.removable,id:this.props.id}):n.a.createElement(n.a.Fragment,null,n.a.createElement(S,{data:this.props.data,id:this.props.id,displayStyle:this.props.displayStyle}),n.a.createElement(_,{data:this.props.data})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"{}"!==JSON.stringify(e.data)?200===e.data.cod?{loading:!1,error:!1}:{loading:!1,error:!0}:{loading:!0,error:!1}}}]),t}(n.a.Component),R=a(10),D=function(e,t){return function(a){a({type:"REQUESTED_WEATHER",requestCreator:t});var r="https://api.openweathermap.org/data/2.5/weather?".concat(e,"&units=metric&appid=").concat("73a2f4a5254e97adabb2160caa6234a8");fetch(r).then((function(e){return e.json()})).then((function(e){return a(function(e,t){return{type:"REQUESTED_WEATHER_SUCCEEDED",requestCreator:t,payload:e}}(W(e),t))}),(function(e){return a(function(e){return{type:"REQUESTED_WEATHER_FAILED",requestCreator:e}}(t))}))}},W=function(e){return 200===e.cod?{cod:e.cod,city:e.name,temp:Math.round(parseFloat(e.main.temp)),pressure:Math.round(.75*parseInt(e.main.pressure)),humidity:e.main.humidity,weather:e.weather[0].description[0].toUpperCase()+e.weather[0].description.slice(1),icon:e.weather[0].icon,wind:e.wind.speed,coords:[e.coord.lat,e.coord.lon]}:{cod:e.cod}},F=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(v.a)(this,Object(b.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(R.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(R.a)(a)),a.clearInput=a.clearInput.bind(Object(R.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"clearInput",value:function(){this.setState({value:""})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.weatherSearch("q=".concat(this.state.value),"".concat(this.state.value));var t=[this.state.value],a=JSON.parse(localStorage.getItem("cities"));if(null!=a){var r=!0,n=!1,i=void 0;try{for(var o,c=a[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var s=o.value;t.includes(s)||t.push(s)}}catch(l){n=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}}localStorage.setItem("cities",JSON.stringify(t)),this.clearInput()}},{key:"render",value:function(){return n.a.createElement("div",{id:"nav_favour_weather"},n.a.createElement("div",{className:"text"},"Favourites"),n.a.createElement("form",{id:"add_favour_form",onSubmit:this.handleSubmit},n.a.createElement("input",{className:"input_text",name:"city_name",type:"text",placeholder:"Add new city",required:!0,value:this.state.value,onChange:this.handleChange}),n.a.createElement("input",{className:"img_button",type:"image",name:"submit",alt:"add",src:"img/add.png",value:"Submit"})))}}]),t}(n.a.Component),T=Object(s.b)(null,(function(e){return{weatherSearch:function(t,a){e(D(t,a))}}}))(F),I=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.data.map((function(e,t){return n.a.createElement(N,{key:t,data:e.data,id:e.key,displayStyle:"Favour",removable:!0})}));return n.a.createElement("div",{id:"favour_weather_container"},e)}}]),t}(n.a.Component),A=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.geoRefresh();var e=JSON.parse(localStorage.getItem("cities"));if(null!==e){var t=!0,a=!1,r=void 0;try{for(var n,i=e.reverse()[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.props.weatherSearch("q=".concat(o),"".concat(o))}}catch(c){a=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}}}},{key:"render",value:function(){return n.a.createElement("div",{className:"MainComponent"},n.a.createElement(O,{geoRefreshFunc:this.props.geoRefresh}),n.a.createElement(N,{data:this.props.geoWeather.data,displayStyle:"Geo",id:null,removable:!1}),n.a.createElement(T,null),n.a.createElement(I,{data:this.props.favourWeather}))}}]),t}(n.a.Component);var U=Object(s.b)((function(e){var t={favourWeather:[],geoWeather:{key:"Geo",data:{}}};if(null!==e.action)for(var a in e.action)"GeolocationWeather"!==a?t.favourWeather.unshift({key:a,data:e.action[a]}):t.geoWeather={key:a,data:e.action[a]};return t}),(function(e){return{weatherSearch:function(t,a){e(D(t,a))},geoRefresh:function(){e((function(e){var t="GeolocationWeather";e({type:"REQUESTED_FOR_GEOLOCATION",requestCreator:t}),navigator.geolocation.getCurrentPosition((function(a){var r=a.coords.latitude,n=a.coords.longitude,i="lat=".concat(r,"&lon=").concat(n);return e(D(i,t))}),(function(a){var r="q=".concat("Saint Petersburg");return e(D(r,t))}),{enableHighAccuracy:!0})}))}}}))(A),P=Object(c.d)(d,Object(c.a)(h.a));P.subscribe((function(){return console.log(P.getState())}));var q=function(){return n.a.createElement(s.a,{store:P},n.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.6f842ba9.chunk.js.map